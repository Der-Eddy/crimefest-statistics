<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" type="text/css" href="semantic-ui/semantic.min.css">
        <script src="js/jquery.min.js"></script>
        <script src="semantic-ui/semantic.min.js"></script>
        <script src="circle/circle-progress.js"></script>
        <title>YACSS - Crimefest Statistics</title>
        <style>
            body {background-color: #270338; color: #ffffff; text-shadow: 0px 1px rgba(0, 0, 0, 0.2)}
            h1.ui.center.header {margin-top: 2em; color: #ffffff; text-shadow: 0px 1px rgba(0, 0, 0, 0.2); font-weight: 300;}
            h2.ui.center.header {margin-top: 2em; padding: 2em 0em; color: #ffffff; text-shadow: 0px 1px rgba(0, 0, 0, 0.2)}
            h3.ui.center.header {color: #ffffff; text-shadow: 0px 1px rgba(0, 0, 0, 0.2)}
            h4.ui.center.header {color: #ffffff; text-shadow: 0px 1px rgba(0, 0, 0, 0.2)}
            .column:not(#left) {text-align: center!important;}
            #footer{padding: 15px; margin-top: 15px; border-top: solid #6435C9 1px;};
            p {color: #ffffff;}
            addr {color: rgba(0, 0, 0, 0.87);}
            .modal p {color: rgba(0, 0, 0, 0.87);}
        </style>
    </head>
    <body>
        <h1 class="ui center aligned header">Yet Another <a href="http://www.overkillsoftware.com/games/roadtocrimefest/" target="_blank">Crimefest</a> Statistics Site</h2>

        <div class="ui two column centered grid">
            <div class="three column centered row">
                <div class="column" id="left">
                    <div class="ui large violet message">
                      <div class="content">
                        Refreshing in <span style="color: violet;" id="countdown">30</span> seconds.
                      </div>
                    </div>
                    <div class="ui icon blue message" id="loadingMessage">
                      <i class="notched circle loading icon"></i>
                      <div class="content">
                        <div class="header">
                          Just one second
                        </div>
                        Fetching Steam data...
                      </div>
                    </div>
                    <div class="ui icon error hidden message" id="warningMessage">
                      <i class="warning icon"></i>
                      <div class="content">
                        <div class="header">
                          An error occured
                        </div>
                        Failed fetching Steam Web API data. Check <a href="https://steamstat.us/" target_"_blank">Steamstat.us</a> if it's down.
                      </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ui four column centered grid">
            <div class="five column centered row">
                <div class="ui horizontal inverted divider">
                  <p><i class="ticket icon"></i>Challenge 3</p>
                </div>
                <div class="column">
                    <h3 class="ui center aligned header">Chains</h4>
                    <div class="circle ChainsThird"></div>
                    <span id="ChainsThirdNumber">0</span> / 70,000
                    <h4 class="ui center aligned header">Get to cooking!</h4>
                    Complete heists where you manufacture illegal drugs 70,000 times during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Clover</h4>
                  <div class="circle CloverThird"></div>
                  <span id="CloverThirdNumber">0</span> / 40,000
                  <h4 class="ui center aligned header">A Hundred Different Ways!</h4>
                  Eliminate the rat on the Hoxton Revenge heist 40,000 times during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Dallas</h4>
                  <div class="circle DallasThird"></div>
                  <span id="DallasThirdNumber">0</span> / 3,000,000,000,000
                  <h4 class="ui center aligned header">PAYDAY, All Day, Every Day</h4>
                  Earn $3,000,000,000,000 during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Houston</h4>
                  <div class="circle HoustonThird"></div>
                  <span id="HoustonThirdNumber">0</span> / 1,000.000
                  <h4 class="ui center aligned header">Jacket Up!</h4>
                  Kill 1,000,000 gangsters with any baseball bat during the Road to Crimefest event.
                </div>

                <div class="ui horizontal inverted divider">
                  <p><i class="ticket icon"></i>Challenge 2</p>
                </div>
                <div class="column">
                    <h3 class="ui center aligned header">Chains</h4>
                    <div class="circle ChainsSecond"></div>
                    <span id="ChainsSecondNumber">0</span> / 300,000
                    <h4 class="ui center aligned header">Get the Fuck Down!</h4>
                    Zip-tie 300,000 civilians during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Clover</h4>
                  <div class="circle CloverSecond"></div>
                  <span id="CloverSecondNumber">0</span> / 100,000,000,000
                  <h4 class="ui center aligned header">Grind Fest</h4>
                  Earn 100,000,000,000 experience during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Dallas</h4>
                  <div class="circle DallasSecond"></div>
                  <span id="DallasSecondNumber">0</span> / 70,000
                  <h4 class="ui center aligned header">Let's Do This</h4>
                  Kill 70,000 Bulldozers with submachine guns during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Houston</h4>
                  <div class="circle HoustonSecond"></div>
                  <span id="HoustonSecondNumber">0</span> / 15,000,000
                  <h4 class="ui center aligned header">Self Defense, I swear!</h4>
                  Kill 15,000,000 enemies during the Road to Crimefest event. 
                </div>

                <div class="ui horizontal inverted divider">
                  <p><i class="ticket icon"></i>Challenge 1</p>
                </div>
                <div class="column">
                    <h3 class="ui center aligned header">Chains</h4>
                    <div class="circle ChainsFirst"></div>
                    <span id="ChainsFirstNumber">0</span> / 1,000,000
                    <h4 class="ui center aligned header">We're all Bonnie here!</h4>
                    Kill One Million enemies with the whisky bottle during the Road to Crimefest event. 
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Clover</h4>
                  <div class="circle CloverFirst"></div>
                  <span id="CloverFirstNumber">0</span> / 2,000,000
                  <h4 class="ui center aligned header">WOLOLOLOLOLOOO!</h4>
                  Kill Two Million cloakers during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Dallas</h4>
                  <div class="circle DallasFirst"></div>
                  <span id="DallasFirstNumber">0</span> / 100,000
                  <h4 class="ui center aligned header">Hair Fallout</h4>
                  Steal the warheads for Vlad in the Meltdown heist 100,000 times during the Road to Crimefest event.
                </div>
                <div class="column">
                  <h3 class="ui center aligned header">Houston</h4>
                  <div class="circle HoustonFirst"></div>
                  <span id="HoustonFirstNumber">0</span> / 120,000
                  <h4 class="ui center aligned header">Wankers</h4>
                  Help Hoxton break into the FBI and steal the server 120,000 times during the Road to Crimefest event. 
                </div>
          </div>
        </div>

        <div class="ui inverted vertical footer segment" id="footer">
          <div class="ui container">
            <div class="ui stackable inverted divided equal height stackable grid">
              <div class="three wide column">
                <h4 class="ui inverted header">About</h4>
                <div class="ui inverted link list">
                  <a href="https://www.reddit.com/user/Der-Eddy/" class="item"><i class="reddit square icon"></i> /u/Der-Eddy</a>
                  <a href="http://steamcommunity.com/id/der-eddy/" class="item"><i class="steam square icon"></i> Der-Eddy</a>
                  <a href="#" class="item"><i class="github square icon"></i> Github Repository</a>
                  <a href="#" class="item" onclick="$('.ui.modal').modal('show');"><i class="info icon"></i> Contact</a>
                </div>
              </div>
              <div class="three wide column">
                <h4 class="ui inverted header">Made with</h4>
                <div class="ui inverted link list">
                  <a href="http://semantic-ui.com/" class="item"><i class="css3 icon"></i> Semantic-UI</a>
                  <a href="https://github.com/kottenator/jquery-circle-progress" class="item"><i class="circle notched icon"></i> jQuery Circle Progress</a>
                  <a href="http://jquery.com/" class="item"><i class="html5 icon"></i> jQuery</a>
                  <a href="https://www.clever-cloud.com/en/" class="item"><i class="cloud icon"></i> Clever-Cloud</a>
                  <a href="https://www.cloudflare.com/" class="item"><i class="soundcloud icon"></i> Cloudflare</a>
                </div>
              </div>
              <div class="seven wide column">
                <h4 class="ui inverted header">Other cool informations</h4>
                <p>Consider visiting <a href="https://www.reddit.com/r/paydaytheheist">/r/paydaytheheist</a> for cool discussions, news and other stuff for PayDay2!</p>
                <br><br><p>Poor Wolf :(</p>
              </div>
            </div>
          </div>
        </div>

        <div class="ui modal">
          <i class="close icon"></i>
          <div class="header">
            Imprint & Do-not-Track
          </div>
          <div class="image content">
            <div class="ui medium image">
              <img src="/img/StrichHalb.png">
            </div>
            <div class="description">
              <p>Nach § 5 Telemediengesetz</p>
              <div class="ui link list">
                <a href="https://www.reddit.com/user/Der-Eddy/" class="item"><i class="reddit square icon"></i> /u/Der-Eddy</a>
                <a href="http://steamcommunity.com/id/der-eddy/" class="item"><i class="steam square icon"></i> Der-Eddy</a>
                <a href="https://github.com/Der-Eddy" class="item"><i class="github square icon"></i> Der-Eddy</a>
              </div>
              <img src="img/imprint.png">
              <br><br>
              <p>I'm using <a href="http://piwik.org/">Piwik</a> to get some informations to optimize my traffic load.</p>
              <iframe style="border: 0; height: 200px; width: 600px;" src="http://crimefest.eddydev.de/piwik/index.php?module=CoreAdminHome&action=optOut&language=de"></iframe>
            </div>
          </div>
        </div>

        <script>
            var ChainsFirst = $('.ChainsFirst.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            ChainsFirst.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var DallasFirst = $('.DallasFirst.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            DallasFirst.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var CloverFirst = $('.CloverFirst.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            CloverFirst.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var HoustonFirst = $('.HoustonFirst.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            var ChainsSecond = $('.ChainsSecond.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            ChainsSecond.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 6.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var DallasSecond = $('.DallasSecond.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            DallasSecond.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var CloverSecond = $('.CloverSecond.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            CloverSecond.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var HoustonSecond = $('.HoustonSecond.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            HoustonSecond.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 5.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var ChainsThird = $('.ChainsThird.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            ChainsThird.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var DallasThird = $('.DallasThird.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            DallasThird.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var CloverThird = $('.CloverThird.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            CloverThird.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            var HoustonThird = $('.HoustonThird.circle').circleProgress({
                value: 0,
                size: 150,
                startAngle: 1.5 * Math.PI,
                thickness: 20,
                fill: {
                    color: "#9EDD76",
                }
            });

            HoustonThird.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            HoustonFirst.on('circle-animation-progress', function(e, v, stepValue) {
              var obj = $(this).data('circle-progress'),
                  ctx = obj.ctx,
                  s = obj.size,
                  sv = (100 * stepValue).toFixed(),
                  fill = obj.arcFill;

              ctx.save();
              ctx.font = s / 4.0 + "px sans-serif";
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillStyle = fill;
              ctx.fillText(sv + '%', s / 2, s / 2);
              ctx.restore();
            });

            function refresh(){
              $("#warningMessage").fadeOut();
              $.getJSON( "apiv2.php", function( data ) {
                  $("#loadingMessage").fadeOut();

                  var ChainsThird = parseInt(data.response.globalstats.crimefest_challenge_chains_3.total);
                  $("#ChainsThirdNumber").text(ChainsThird.toLocaleString());
                  $('.ChainsThird').circleProgress('value', ChainsThird / 70000);
                  var DallasThird = parseInt(data.response.globalstats.crimefest_challenge_dallas_3.total) * 10000;
                  $("#DallasThirdNumber").text(DallasThird.toLocaleString());
                  $('.DallasThird').circleProgress('value', DallasThird / 3000000000000);
                  var CloverThird = parseInt(data.response.globalstats.crimefest_challenge_clover_3.total);
                  $("#CloverThirdNumber").text(CloverThird.toLocaleString());
                  $('.CloverThird').circleProgress('value', CloverThird / 40000);
                  var HoustonThird = parseInt(data.response.globalstats.crimefest_challenge_houston_3.total);
                  $("#HoustonThirdNumber").text(HoustonThird.toLocaleString());
                  $('.HoustonThird').circleProgress('value', HoustonThird / 1000000);

                  var ChainsSecond = parseInt(data.response.globalstats.crimefest_challenge_chains_2.total);
                  $("#ChainsSecondNumber").text(ChainsSecond.toLocaleString());
                  $('.ChainsSecond').circleProgress('value', ChainsSecond / 300000);
                  var DallasSecond = parseInt(data.response.globalstats.crimefest_challenge_dallas_2.total) + 13000;
                  $("#DallasSecondNumber").text(DallasSecond.toLocaleString());
                  $('.DallasSecond').circleProgress('value', DallasSecond / 70000);
                  var CloverSecond = parseInt(data.response.globalstats.crimefest_challenge_clover_2.total) * 100;
                  $("#CloverSecondNumber").text(CloverSecond.toLocaleString());
                  $('.CloverSecond').circleProgress('value', CloverSecond / 100000000000);
                  var HoustonSecond = parseInt(data.response.globalstats.crimefest_challenge_houston_2.total);
                  $("#HoustonSecondNumber").text(HoustonSecond.toLocaleString());
                  $('.HoustonSecond').circleProgress('value', HoustonSecond / 15000000);

                  var ChainsFirst = parseInt(data.response.globalstats.crimefest_challenge_chains_1.total);
                  $("#ChainsFirstNumber").text(ChainsFirst.toLocaleString());
                  $('.ChainsFirst').circleProgress('value', ChainsFirst / 1000000);
                  var DallasFirst = parseInt(data.response.globalstats.crimefest_challenge_dallas_1.total);
                  $("#DallasFirstNumber").text(DallasFirst.toLocaleString());
                  $('.DallasFirst').circleProgress('value', DallasFirst / 100000);
                  var CloverFirst = parseInt(data.response.globalstats.crimefest_challenge_clover_1.total);
                  $("#CloverFirstNumber").text(CloverFirst.toLocaleString());
                  $('.CloverFirst').circleProgress('value', CloverFirst / 2000000);
                  var HoustonFirst = parseInt(data.response.globalstats.crimefest_challenge_houston_1.total) + 48000;
                  $("#HoustonFirstNumber").text(HoustonFirst.toLocaleString());
                  $('.HoustonFirst').circleProgress('value', HoustonFirst / 120000);
              }).error(function() { $("#loadingMessage").fadeOut(); $("#warningMessage").fadeIn(); });
            }

            refresh();

            var time = 30;
            setInterval( function() {
        
                time--;
                
                $('#countdown').html(time);
                
                if (time === 0) {
                    
                    time = 30;
                    refresh();
                }    
                
                
            }, 1000 );
        
        <!-- Piwik -->
          var _paq = _paq || [];
          _paq.push(['trackPageView']);
          _paq.push(['enableLinkTracking']);
          (function() {
            var u="//crimefest.eddydev.de/piwik/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', 1]);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
          })();
        </script>
        <noscript><p><img src="//crimefest.eddydev.de/piwik/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
        <!-- End Piwik Code -->
    </body>
</html>